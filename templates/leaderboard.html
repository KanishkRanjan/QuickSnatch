{% extends "base.html" %}

{% block content %}
<style>
    .leaderboard-card {
        background-color: rgba(10, 10, 10, 0.95);
        border: 1px solid #33ff33;
        border-radius: 15px;
        padding: 2rem;
        margin: 2rem auto;
        box-shadow: 0 0 20px rgba(51, 255, 51, 0.2);
        max-width: 1200px;
    }

    .leaderboard-header {
        text-align: center;
        margin-bottom: 2rem;
        color: #33ff33;
        font-size: 2.5rem;
        text-shadow: 0 0 10px rgba(51, 255, 51, 0.5);
    }

    .leaderboard-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0 0.5rem;
        margin: 1rem 0;
    }

    .leaderboard-table th {
        background-color: rgba(51, 255, 51, 0.1);
        color: #33ff33;
        font-size: 1.3rem;
        padding: 1rem;
        text-align: center;
        border-bottom: 2px solid #33ff33;
    }

    .leaderboard-table td {
        background-color: rgba(255, 255, 255, 0.05);
        color: #ffffff;
        font-size: 1.2rem;
        padding: 1rem;
        text-align: center;
        transition: all 0.3s ease;
    }

    .leaderboard-table tr:hover td {
        background-color: rgba(51, 255, 51, 0.1);
        transform: scale(1.01);
    }

    .rank {
        font-weight: bold;
        font-size: 1.4rem;
    }

    .rank-1 {
        color: #ffd700; /* Gold */
    }

    .rank-2 {
        color: #c0c0c0; /* Silver */
    }

    .rank-3 {
        color: #cd7f32; /* Bronze */
    }

    .team-name {
        font-weight: 500;
        color: #33ff33;
    }

    .level {
        font-weight: bold;
        color: #ffcc00;
        font-size: 1.3rem;
    }

    .time {
        color: #3399ff;
    }

    .last-updated {
        color: #999;
        font-size: 0.9rem;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
        .leaderboard-header {
            font-size: 2rem;
        }

        .leaderboard-table th,
        .leaderboard-table td {
            padding: 0.75rem;
            font-size: 1rem;
        }

        .rank {
            font-size: 1.2rem;
        }
    }

    /* Animation for new entries */
    @keyframes newEntry {
        from {
            transform: translateY(-20px);
            opacity: 0;
        }
        to {
            transform: translateY(0);
            opacity: 1;
        }
    }

    .new-entry {
        animation: newEntry 0.5s ease-out;
    }

    /* Loading Animation */
    .loading {
        text-align: center;
        padding: 2rem;
    }

    .loading-spinner {
        border: 4px solid rgba(51, 255, 51, 0.1);
        border-top: 4px solid #33ff33;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 0 auto;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
</style>

<div class="leaderboard-card">
    <h2 class="leaderboard-header">
        <i class="fas fa-trophy"></i> Team Rankings
    </h2>
    
    <div class="table-responsive">
        <table class="leaderboard-table">
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>Team Name</th>
                    <th>Level</th>
                    <th>Time Taken</th>
                    <th>Last Updated</th>
                </tr>
            </thead>
            <tbody>
                {% for team in teams %}
                <tr class="{% if loop.index == 1 %}new-entry{% endif %}">
                    <td class="rank rank-{{ loop.index }}">
                        {% if loop.index == 1 %}
                            <i class="fas fa-crown"></i>
                        {% endif %}
                        #{{ loop.index }}
                    </td>
                    <td class="team-name">{{ team.name }}</td>
                    <td class="level">Level {{ team.level }}</td>
                    <td class="time">
                        {% if team.time_taken is not none %}
                            {% set minutes = (team.time_taken / 60)|int %}
                            {% set seconds = (team.time_taken % 60)|int %}
                            {{ minutes }}m {{ seconds }}s
                        {% else %}
                            --
                        {% endif %}
                    </td>
                    <td class="last-updated">
                        {% if team.last_submission %}
                            {{ team.last_submission.strftime('%Y-%m-%d %H:%M:%S') }}
                        {% else %}
                            --
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<script>
    // Auto-refresh leaderboard every 30 seconds
    setInterval(function() {
        location.reload();
    }, 30000);
</script>
{% endblock %}
